## Vite ржПржмржВ React Testing Library: ржПржХржЯрж┐ ржкрзВрж░рзНржгрж╛ржЩрзНржЧ ржЧрж╛ржЗржб ЁЯЪА

ржПржЗ ржЧрж╛ржЗржбрзЗ ржЖржорж░рж╛ ржПржХржЯрж┐ Vite-ржнрж┐рждрзНрждрж┐ржХ React ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ ржХрж┐ржнрж╛ржмрзЗ React Testing Library (RTL), Vitest, ржПржмржВ `jsdom` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХржорзНржкрзЛржирзЗржирзНржЯ ржЯрзЗрж╕рзНржЯрж┐ржВ рж╕рзЗржЯржЖржк ржХрж░рждрзЗ рж╣ржпрж╝, рждрж╛ ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ ржжрзЗржЦржмред

### ржХрзЗржи ржПржЗ ржХржорзНржмрж┐ржирзЗрж╢ржи?

- **Vite:** ржЕрждрзНржпржирзНржд ржжрзНрж░рзБржд ржПржмржВ ржЖржзрзБржирж┐ржХ ржПржХржЯрж┐ ржмрж┐рж▓рзНржб ржЯрзБрж▓, ржпрж╛ ржбрзЗржнрзЗрж▓ржкржорзЗржирзНржЯ ржЕржнрж┐ржЬрзНржЮрждрж╛ржХрзЗ ржорж╕рзГржг ржХрж░рзЗред
- **Vitest:** Vite-ржПрж░ ржЬржирзНржп ржмрж┐рж╢рзЗрж╖ржнрж╛ржмрзЗ рждрзИрж░рж┐ ржПржХржЯрж┐ ржЯрзЗрж╕рзНржЯрж┐ржВ ржлрзНрж░рзЗржоржУржпрж╝рж╛рж░рзНржХред ржПржЯрж┐ Vite-ржПрж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржЗ ржХрж╛ржЬ ржХрж░рзЗ, рждрж╛ржЗ рж╕рзЗржЯржЖржк ржЕржирзЗржХ рж╕рж╣ржЬ ржПржмржВ ржПржЯрж┐ ржЕржмрж┐рж╢рзНржмрж╛рж╕рзНржпржнрж╛ржмрзЗ ржжрзНрж░рзБрждред
- **React Testing Library (RTL):** ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржжрзГрж╖рзНржЯрж┐ржХрзЛржг ржерзЗржХрзЗ ржХржорзНржкрзЛржирзЗржирзНржЯ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ рж╕рзЗрж░рж╛ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐, ржпрж╛ ржЖржкржирж╛рж░ ржЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛржХрзЗ ржЖрж░ржУ ржирж┐рж░рзНржнрж░ржпрзЛржЧрзНржп ржХрж░рзЗ рждрзЛрж▓рзЗред

---

### ржзрж╛ржк рзз: ржирждрзБржи Vite + React ржкрзНрж░ржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рзБржи

ржкрзНрж░ржержорзЗ, ржЯрж╛рж░рзНржорж┐ржирж╛рж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЯрж┐ ржирждрзБржи React ржкрзНрж░ржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рзБржиред

Bash

```bash
npm create vite@latest my-testing-app -- --template react
```

ржПржмрж╛рж░ ржкрзНрж░ржЬрзЗржХрзНржЯ ржбрж┐рж░рзЗржХрзНржЯрж░рж┐рждрзЗ ржкрзНрж░ржмрзЗрж╢ ржХрж░рзБржи ржПржмржВ `npm install` ржЪрж╛рж▓рж┐рзЯрзЗ ржжрж┐ржиред

Bash

```bash
cd my-testing-app
npm install
```

---

### ржзрж╛ржк рзи: ржЯрзЗрж╕рзНржЯрж┐ржВрзЯрзЗрж░ ржЬржирзНржп ржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржкрзНржпрж╛ржХрзЗржЬ ржЗржирж╕рзНржЯрж▓ ржХрж░рзБржи тЪЩя╕П

ржЖржорж╛ржжрзЗрж░ ржЯрзЗрж╕рзНржЯрж┐ржВ ржПржиржнрж╛ржпрж╝рж░ржиржорзЗржирзНржЯ рж╕рзЗржЯржЖржк ржХрж░рж╛рж░ ржЬржирзНржп ржХрж┐ржЫрзБ ржбрзЗржнрзЗрж▓ржкрж╛рж░ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ (dev dependencies) ржЗржирж╕рзНржЯрж▓ ржХрж░рждрзЗ рж╣ржмрзЗред

Bash

```bash
npm install -D vitest jsdom @testing-library/react @testing-library/jest-dom @testing-library/user-event
```

ржЖрж╕рзБржи ржЬрзЗржирзЗ ржирж┐ржЗ ржХрзЛржи ржкрзНржпрж╛ржХрзЗржЬ ржХрзА ржХрж╛ржЬ ржХрж░рзЗ:

- **`vitest`**: ржЖржорж╛ржжрзЗрж░ ржЯрзЗрж╕рзНржЯ рж░рж╛ржирж╛рж░ ржПржмржВ ржЯрзЗрж╕рзНржЯрж┐ржВ ржлрзНрж░рзЗржоржУржпрж╝рж╛рж░рзНржХред
- **`jsdom`**: Node.js ржПржиржнрж╛ржпрж╝рж░ржиржорзЗржирзНржЯрзЗ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗрж░ ржорждрзЛ DOM (Document Object Model) ржкрж░рж┐ржмрзЗрж╢ рждрзИрж░рж┐ ржХрж░рзЗ, ржпрж╛ ржЫрж╛рзЬрж╛ RTL ржХрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржирж╛ред
- **`@testing-library/react`**: React ржХржорзНржкрзЛржирзЗржирзНржЯ рж░рзЗржирзНржбрж╛рж░ ржПржмржВ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛рж░ ржорзВрж▓ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ред
- **`@testing-library/jest-dom`**: DOM-ржПрж░ ржЕржмрж╕рзНржерж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛рж░ ржЬржирзНржп ржЕржирзЗржХ рж╕рзБржирзНржжрж░ ржПржмржВ ржжрж░ржХрж╛рж░рж┐ ржорзНржпрж╛ржЪрж╛рж░ (matcher) ржпрзЛржЧ ржХрж░рзЗ, ржпрзЗржоржи `toBeInTheDocument()`ред
- **`@testing-library/user-event`**: ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржмрж┐ржнрж┐ржирзНржи ржЕрзНржпрж╛ржХрж╢ржи (ржпрзЗржоржи ржХрзНрж▓рж┐ржХ, ржЯрж╛ржЗржкрж┐ржВ) ржЕржирзБржХрж░ржг ржХрж░рж╛рж░ ржЬржирзНржп ржПржЯрж┐ `fireEvent`ржПрж░ ржПржХржЯрж┐ ржЙржирзНржиржд рж╕ржВрж╕рзНржХрж░ржгред

---

### ржзрж╛ржк рзй: Vitest ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи рж╕рзЗржЯржЖржк ржХрж░рзБржи

ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ рж░рзБржЯ ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржерж╛ржХрж╛ `vite.config.js` (ржЕржержмрж╛ `.js`/.ts) ржлрж╛ржЗрж▓ржЯрж┐ ржЦрзБрж▓рзБржи ржПржмржВ Vitest-ржПрж░ ржЬржирзНржп ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржпрзЛржЧ ржХрж░рзБржиред

JavaScript

```jsx
// vite.config.js
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: './src/test/setup.js', // ржЕржержмрж╛ setup.ts
  },
});
```

ржПржЦрж╛ржирзЗ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржирзЗрж░ ржкрзНрж░рждрж┐ржЯрж┐ ржЕржВрж╢рзЗрж░ ржмрзНржпрж╛ржЦрзНржпрж╛ ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ:

- **`globals: true`**: ржПрж░ ржорж╛ржзрзНржпржорзЗ ржЖржкржирж╛ржХрзЗ ржкрзНрж░рждрж┐ржЯрж┐ ржЯрзЗрж╕рзНржЯ ржлрж╛ржЗрж▓рзЗ `test`, `describe`, `expect` ржЗрждрзНржпрж╛ржжрж┐ ржЗржорзНржкрзЛрж░рзНржЯ ржХрж░рждрзЗ рж╣ржмрзЗ ржирж╛ред Vitest ржПржЧрзБрж▓рзЛ ржЧрзНрж▓рзЛржмрж╛рж▓рж┐ ржЙржкрж▓ржмрзНржз ржХрж░рзЗ ржжрзЗржмрзЗред
- **`environment: 'jsdom'`**: ржПржЯрж┐ Vitest-ржХрзЗ ржмрж▓рзЗ ржжрзЗрзЯ ржпрзЗ ржЯрзЗрж╕рзНржЯ ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржп `jsdom` ржкрж░рж┐ржмрзЗрж╢ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣ржмрзЗред
- **`setupFiles`**: ржЯрзЗрж╕рзНржЯ рж╢рзБрж░рзБ рж╣ржУрзЯрж╛рж░ ржЖржЧрзЗ ржХрзЛржирзЛ ржлрж╛ржЗрж▓ рж░рж╛ржи ржХрж░рж╛рж░ ржкрзНрж░рзЯрзЛржЬржи рж╣рж▓рзЗ рждрж╛ ржПржЦрж╛ржирзЗ ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рждрзЗ рж╣рзЯред ржЖржорж░рж╛ ржПржЗ ржлрж╛ржЗрж▓ржЯрж┐ `@testing-library/jest-dom`ржПрж░ ржорзНржпрж╛ржЪрж╛рж░ржЧрзБрж▓рзЛ ржЧрзНрж▓рзЛржмрж╛рж▓рж┐ рж╕рзЗржЯ ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмред

---

### ржзрж╛ржк рзк: ржЯрзЗрж╕рзНржЯрж┐ржВ рж╕рзЗржЯржЖржк ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзБржи

`vite.config.js`-ржП ржЖржорж░рж╛ `setupFiles`-ржПрж░ ржЬржирзНржп ржПржХржЯрж┐ ржкрж╛ржерзЗрж░ ржХржерж╛ ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рзЗржЫрж┐ред ржПржЦржи рж╕рзЗржЗ ржлрж╛ржЗрж▓ржЯрж┐ рждрзИрж░рж┐ ржХрж░рждрзЗ рж╣ржмрзЗред

`src` ржлрзЛрж▓рзНржбрж╛рж░рзЗрж░ ржнрзЗрждрж░ `test` ржирж╛ржорзЗ ржПржХржЯрж┐ ржирждрзБржи ржлрзЛрж▓рзНржбрж╛рж░ рждрзИрж░рж┐ ржХрж░рзБржи ржПржмржВ рждрж╛рж░ ржнрзЗрждрж░рзЗ `setup.js` ржирж╛ржорзЗ ржПржХржЯрж┐ ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзБржиред

**ржлрж╛ржЗрж▓рзЗрж░ ржЕржмрж╕рзНржерж╛ржи:** `src/test/setup.js`

ржПржЗ ржлрж╛ржЗрж▓рзЗ ржирж┐ржЪрзЗрж░ ржХрзЛржбржЯрж┐ рж▓рж┐ржЦрзБржи:

JavaScript

```jsx
// src/test/setup.js
import { expect, afterEach } from 'vitest';
import { cleanup } from '@testing-library/react';
import * as matchers from '@testing-library/jest-dom/matchers';

// jest-dom-ржПрж░ ржорзНржпрж╛ржЪрж╛рж░ржЧрзБрж▓рзЛржХрзЗ Vitest-ржПрж░ `expect`-ржПрж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред
expect.extend(matchers);

// ржкрзНрж░рждрж┐ржЯрж┐ ржЯрзЗрж╕рзНржЯ рж╢рзЗрж╖ рж╣ржУрзЯрж╛рж░ ржкрж░ DOM ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рж╛рж░ ржЬржирзНржпред
afterEach(() => {
  cleanup();
});
```

ржПржЗ ржлрж╛ржЗрж▓ржЯрж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ:

1. `toBeInTheDocument()`ржПрж░ ржорждрзЛ рж╕ржм ржжрж░ржХрж╛рж░рж┐ ржорзНржпрж╛ржЪрж╛рж░ `expect` ржлрж╛ржВрж╢ржирзЗ ржкрж╛ржУрзЯрж╛ ржпрж╛ржмрзЗред
2. ржкрзНрж░рждрж┐ржЯрж┐ ржЯрзЗрж╕рзНржЯ ржХрзЗрж╕ ржЪрж╛рж▓рж╛ржирзЛрж░ ржкрж░рзЗ `cleanup` ржлрж╛ржВрж╢ржи ржХрж▓ ржХрж░рзЗ DOM ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рж╛ рж╣ржмрзЗ, ржпрж╛рждрзЗ ржПржХржЯрж┐ ржЯрзЗрж╕рзНржЯрзЗрж░ ржкрзНрж░ржнрж╛ржм ржЕржирзНржпржЯрж┐рж░ ржЙржкрж░ ржирж╛ ржкрзЬрзЗред

---

### ржзрж╛ржк рзл: ржПржХржЯрж┐ ржХржорзНржкрзЛржирзЗржирзНржЯ ржПржмржВ рждрж╛рж░ ржЯрзЗрж╕рзНржЯ рж▓рж┐ржЦрзБржи ЁЯзк

ржПржЦржи ржЖржорж░рж╛ ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг ржХрж╛ржЙржирзНржЯрж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯ ржПржмржВ рж╕рзЗржЯрж┐рж░ ржЬржирзНржп ржПржХржЯрж┐ ржЯрзЗрж╕рзНржЯ рж▓рж┐ржЦржмред

**рзз. ржХржорзНржкрзЛржирзЗржирзНржЯ рждрзИрж░рж┐ ржХрж░рзБржи:**`src` ржлрзЛрж▓рзНржбрж╛рж░рзЗрж░ ржнрзЗрждрж░ `components` ржирж╛ржорзЗ ржПржХржЯрж┐ ржлрзЛрж▓рзНржбрж╛рж░ рждрзИрж░рж┐ ржХрж░рзБржи ржПржмржВ рж╕рзЗржЦрж╛ржирзЗ `Counter.jsx` ржирж╛ржорзЗ ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзБржиред

JavaScript

```jsx
// src/components/Counter.jsx
import React, { useState } from 'react';

function Counter() {
  const [count, setCount] = useState(0);

  return (
    <div>
      <h1>Counter</h1>
      <p>Current count: {count}</p>
      <button onClick={() => setCount(count + 1)}>Increment</button>
    </div>
  );
}

export default Counter;
```

**рзи. ржЯрзЗрж╕рзНржЯ ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзБржи:**`Counter.jsx`-ржПрж░ ржкрж╛рж╢рзЗржЗ `Counter.test.jsx` ржирж╛ржорзЗ ржПржХржЯрж┐ ржЯрзЗрж╕рзНржЯ ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзБржиред

JavaScript

```jsx
// src/components/Counter.test.jsx
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import Counter from './Counter';

describe('Counter Component', () => {
  // ржЯрзЗрж╕рзНржЯ рзз: ржХржорзНржкрзЛржирзЗржирзНржЯржЯрж┐ рж╕ржарж┐ржХржнрж╛ржмрзЗ рж░рзЗржирзНржбрж╛рж░ рж╣ржЪрзНржЫрзЗ ржХрж┐ржирж╛
  it('should render the initial counter', () => {
    // Arrange: ржХржорзНржкрзЛржирзЗржирзНржЯ рж░рзЗржирзНржбрж╛рж░ ржХрж░рж╛
    render(<Counter />);

    // Act & Assert: ржПрж▓рж┐ржорзЗржирзНржЯржЧрзБрж▓рзЛ рж╕рзНржХрзНрж░рж┐ржирзЗ ржЖржЫрзЗ ржХрж┐ржирж╛ рждрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛
    expect(screen.getByRole('heading', { name: /counter/i })).toBeInTheDocument();
    expect(screen.getByText('Current count: 0')).toBeInTheDocument();
    expect(screen.getByRole('button', { name: /increment/i })).toBeInTheDocument();
  });

  // ржЯрзЗрж╕рзНржЯ рзи: ржмрзЛрждрж╛ржорзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ ржХрж╛ржЙржирзНржЯ ржмрж╛рзЬржЫрзЗ ржХрж┐ржирж╛
  it('should increment the count when the button is clicked', async () => {
    const user = userEvent.setup();

    // Arrange
    render(<Counter />);

    // Act: ржмрзЛрждрж╛ржоржЯрж┐ ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░рзЗ ржХрзНрж▓рж┐ржХ ржХрж░рж╛
    const incrementButton = screen.getByRole('button', { name: /increment/i });
    await user.click(incrementButton);

    // Assert: ржХрж╛ржЙржирзНржЯ ржмрзЗрзЬрзЗ `1` рж╣рзЯрзЗржЫрзЗ ржХрж┐ржирж╛ рждрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛
    expect(screen.getByText('Current count: 1')).toBeInTheDocument();
  });
});
```

---

### ржзрж╛ржк рзм: ржЯрзЗрж╕рзНржЯ ржЪрж╛рж▓рж╛ржи тЬЕ

рж╕ржмрж╢рзЗрж╖рзЗ, ржЖржкржирж╛рж░ `package.json` ржлрж╛ржЗрж▓ржЯрж┐ ржЦрзБрж▓рзБржи ржПржмржВ `scripts` рж╕рзЗржХрж╢ржирзЗ ржПржХржЯрж┐ ржЯрзЗрж╕рзНржЯ ржХржорж╛ржирзНржб ржпрзЛржЧ ржХрж░рзБржиред

JSON

```jsx
// package.json
"scripts": {
  "dev": "vite",
  "build": "vite build",
  "lint": "eslint . --ext js,jsx --report-unused-disable-directives --max-warnings 0",
  "preview": "vite preview",
  "test": "vitest"
},
```

ржПржмрж╛рж░ ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржбржЯрж┐ ржЪрж╛рж▓рж╛рж▓рзЗржЗ ржЖржкржирж╛рж░ ржЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛ рж░рж╛ржи ржХрж░ржмрзЗред

Bash

```bash
npm test
```

ржЖржкржирж┐ ржпржжрж┐ ржЪрж╛ржи ржпрзЗ ржлрж╛ржЗрж▓ ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛ ржЖржмрж╛рж░ ржЪрж▓рзБржХ, рждрж╛рж╣рж▓рзЗ watch mode ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи:

Bash

```bash
npm test -- --watch
```

ржЕржнрж┐ржиржирзНржжржи! ржЖржкржирж┐ рж╕ржлрж▓ржнрж╛ржмрзЗ Vite + React ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ React Testing Library ржжрж┐рзЯрзЗ ржЯрзЗрж╕рзНржЯрж┐ржВ ржкрж░рж┐ржмрзЗрж╢ рж╕рзЗржЯржЖржк ржХрж░рзЗржЫрзЗржиред